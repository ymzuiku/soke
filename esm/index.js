function h(t,n){let e={__soke:{type:t,errors:{type:n||"Need type is: "+t,matches:[]},matches:[]},required:r=>(e.__soke.errors.required=r||n||"Need required",e.__soke.requred=!0,e),len:(r,s)=>(e.__soke.errors.len=s||n||"Length no equal: "+r,e.__soke.len=r,e),equal:(r,s)=>(e.__soke.errors.equal=s||n||"Not equal the val",e.__soke.equal=r,e),equalByKey:(r,s)=>(e.__soke.errors.equalByKey=s||n||"Not equal by: "+r,e.__soke.equalByKey=r,e),min:(r,s)=>(e.__soke.errors.min=s||n||"Need min: "+r,e.__soke.min=r,e),max:(r,s)=>(e.__soke.errors.max=s||n||"Need max: "+r,e.__soke.max=r,e),pick:(r,s)=>(e.__soke.errors.pick=s||n||"Need in list: "+r,e.__soke.pick=new Set(r),e),notPick:(r,s)=>(e.__soke.errors.notPick=s||n||"Need not in list: "+r,e.__soke.notPick=new Set(r),e)};return e}function k(t,n){let e={__soke:{type:t,errors:{type:n||"Need type is: "+t,matches:[]},matches:[]},required:r=>(e.__soke.errors.required=r||n||"Need required",e.__soke.requred=!0,e),equal:(r,s)=>(e.__soke.errors.equal=s||n||"Not equal the val",e.__soke.equal=r,e),equalByKey:(r,s)=>(e.__soke.errors.equalByKey=s||n||"Not equal by: "+r,e.__soke.equalByKey=r,e)};return e}function d(t,n){let e={__soke:{type:t,errors:{type:n||"Need type is: "+t,matches:[]},matches:[]},required:r=>(e.__soke.errors.required=r||n||"Need required",e.__soke.requred=!0,e),matches:(r,s)=>(e.__soke.errors.matches.push(s||n||"Matches error: "+String(r)),e.__soke.matches.push(r),e),len:(r,s)=>(e.__soke.errors.len=s||n||"Length no equal: "+r,e.__soke.len=r,e),equal:(r,s)=>(e.__soke.errors.equal=s||n||"Not equal the val",e.__soke.equal=r,e),equalByKey:(r,s)=>(e.__soke.errors.equalByKey=s||n||"Not equal by: "+r,e.__soke.equalByKey=r,e),min:(r,s)=>(e.__soke.errors.min=s||n||"Need min: "+r,e.__soke.min=r,e),max:(r,s)=>(e.__soke.errors.max=s||n||"Need max: "+r,e.__soke.max=r,e),pick:(r,s)=>(e.__soke.errors.pick=s||n||"Need in list: "+r,e.__soke.pick=new Set(r),e),notPick:(r,s)=>(e.__soke.errors.notPick=s||n||"Need not in list: "+r,e.__soke.notPick=new Set(r),e),password:r=>(e.matches(/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{6,}$/,r),e),passwordStrong:r=>(e.matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]{8,}$/,r),e),email:r=>(e.matches(/^[A-Za-z0-9\u4e00-\u9fa5]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/,r),e),chinaPhone:r=>(e.matches(/^(?:(?:\+|00)86)?1\d{10}$/,r),e),chinaId:r=>(e.matches(/^[1-9]\d{5}(?:18|19|20)\d{2}(?:0[1-9]|10|11|12)(?:0[1-9]|[1-2]\d|30|31)\d{3}[\dXx]$/,r),e),url:r=>(e.matches(/^(((ht|f)tps?):\/\/)?([^!@#$%^&*?.\s-]([^!@#$%^&*?.\s]{0,63}[^!@#$%^&*?.\s])?\.)+[a-z]{2,6}\/?/,r),e),bank:r=>(e.matches(/^[1-9]\d{9,29}$/,r),e),chinaName:r=>(e.matches(/^(?:[\u4e00-\u9fa5·]{2,16})$/,r),e),chinaCar:r=>(e.matches(/^[京津沪渝冀豫云辽黑湘皖鲁新苏浙赣鄂桂甘晋蒙陕吉闽贵粤青藏川宁琼使领][A-HJ-NP-Z][A-HJ-NP-Z0-9]{4,5}[A-HJ-NP-Z0-9挂学警港澳]$/,r),e),hkId:r=>(e.matches(/^[a-zA-Z]\d{6}\([\dA]\)$/,r),e),number:r=>(e.matches(/^\d+$/,r),e),username:r=>(e.matches(/^[a-zA-Z0-9_-]{4,16}$/,r),e),letterOrNumber:r=>(e.matches(/^[A-Za-z0-9]+$/,r),e),letterAndNumber:r=>(e.matches(/^(?=.*[a-zA-Z])(?=.*\d).+$/,r),e),letter:r=>(e.matches(/^[a-zA-Z]+$/,r),e),uuid:r=>(e.matches(/^[a-f\d]{4}(?:[a-f\d]{4}-){4}[a-f\d]{12}$/i,r),e),integer:r=>(e.matches(/^-?[1-9]\d*$/,r),e),date:r=>(e.matches(/^\d{4}([/:-\S])(1[0-2]|0?[1-9])\1(0?[1-9]|[1-2]\d|30|31) (?:[01]\d|2[0-3]):[0-5]\d:[0-5]\d$/,r),e)};return e}var _={type:(t,n)=>n===void 0||n==="array"&&Array.isArray(t)?!0:typeof t===n,min:(t,n)=>n===void 0?!0:typeof t=="number"?t>=n:t&&t.length?t.length>=n:!1,max:(t,n)=>n===void 0?!0:typeof t=="number"?t<=n:t&&t.length?t.length<=n:!1,pick:(t,n)=>{if(n===void 0)return!0;if(!t)return!1;if(Array.isArray(t)){let u=!0;for(let e=0;e<t.length;e++){let r=t[e];if(!n.has(r)){u=!1;break}}return u}return!!n.has(t)},notPick:(t,n)=>{if(n===void 0)return!0;if(!t)return!1;if(Array.isArray(t)){let u=!0;for(let e=0;e<t.length;e++){let r=t[e];if(n.has(r)){u=!1;break}}return u}return!n.has(t)}};function y(t,n,{first:u,key:e}={}){let r="",s="",m={},l=c=>{if(!t[c])return"";let i=n[c],a=t[c];if(a.isSoke)return typeof i!="object"?a.objectError:y(a.schema,i,{first:!0}).error;let o=t[c].__soke;if(i!==void 0&&!_.type(i,o.type))return o.errors.type;if(o.requred&&!i&&typeof i!="number")return o.errors.required;if(!_.min(i,o.min))return o.errors.min;if(!_.max(i,o.max))return o.errors.max;if(o.len&&typeof i=="string"&&i.length!==o.len)return o.errors.len;if(o.equal&&i!==o.equal)return o.errors.equal;if(o.equalByKey&&i!==n[o.equalByKey])return o.errors.equalByKey;if(o.matches.length){for(let g=0;g<o.matches.length;g++)if(!o.matches[g].test(i))return o.errors.matches[g]}return _.pick(i,o.pick)?_.notPick(i,o.notPick)?"":o.errors.notPick:o.errors.pick};if(e)m[e]=l(e);else{let c=Object.keys(t);for(let i=0;i<c.length;i++){let a=c[i],o=l(a);if(m[a]=o,o&&!r&&(r=o,s=a),o&&u)break}}return{errors:m,error:r,path:s}}var $={object:f,string:t=>d("string",t),bool:t=>k("boolean",t),array:t=>h("array",t),number:t=>h("number",t)};function f(t,n){let u={isSoke:!0,schema:t,objectError:n||"Need a object",schemaKeys:Object.keys(t),validate:(e,r)=>y(t,e,r),isValid:(e,r)=>{let s=y(t,e,{first:!0,key:r});if(s.error)throw new Error(s.error);return!0},dto:e=>{let r=y(t,e);if(r.error)throw new Error(r.error);let s={},m=(l,c,i)=>{l.schemaKeys.forEach(a=>{let o=l.schema[a];o.isSoke?(c[a]={},m(o,c[a],i[a])):c[a]=i[a]})};return m(u,s,e),s}};return u}export{$ as soke};
